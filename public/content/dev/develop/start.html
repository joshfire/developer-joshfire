<h1>Create template entry point(s)</h1>

<p>Unless overridden in the manifest file, the starting point of the template is the <code>index.html</code> file in the top-level directory of the template. The starting point must be a valid HTML document.</p>


<h2 id="override">How to override the default entry point</h2>

<p>Web applications generated by the factory include a device detection mechanism that may redirect users automatically to different entry points based on the class of device they use.</p>

<p>To use this mechanism, your template must define alternative entry points for specific families of devices in the manifest file.</p>

<p>For instance, the following template manifest would generate a Web application where the entry point is <code>index.phone.html</code> for all mobile devices and <code>index.html</code> for all other types of devices:</p>

<pre><code class="json">{
  "name": "redirect",
  <em>[...]</em>
  "joshfire": {
    "devices": [
      {
        "devices": "phone",
        "startfile": "index.phone.html"
      },
      {
        "devices": "*",
        "startfile": "index.html"
      }
    ]
  }
}</code></pre>

<p>See <a href="/doc/develop/devices">Support multiple devices</a> for more information.</p>


<h2 id="bootstrap">Link to bootstrap script</h2>

<p>All files used as template entry points must include a link to the <strong>bootstrap script</strong>. The bootstrap script maps template settings, e.g. the names and number of datasources inputs, to factory user selected values for these settings, e.g. the actual datasources feeds. See the <a href="/doc/ref/templateapi">Template API reference</a> for information about objects and functionalities exposed.</p>

<pre><code class="html">&lt;script data-joshfire-bootstrap&gt;&lt;/script&gt;</code></pre>

<p>When the generated Web application is started, the loading script detects and replaces this line automatically with the appropriate bootstrap JavaScript code. No further work is required from a template perspective to set things up.</p>


<h2 id="bootstrap-dev">Bootstrap script during template development</h2>

<p>The main problem you will face during template development is that the factory can only generate the appropriate bootstrap script when:
<ul>
  <li>it knows about your template;</li>
  <li>there exists a Web application project that uses your template and binds datasource inputs to actual feeds.</li>
</ul>

<h3 id="bootstrap-new">How to create the bootstrap script for a new template</h3>

<p>By definition, the factory does not know anything about your template as long as it has not <em>seen</em> it somehow. Fortunately, the factory allows you to import your template from any git repository using the <strong>Create new</strong> button in the left pane of the templates page. For the import to work:</p>
<ul>
 <li>the manifest file must be correct (images, styles, and code may be missing or incorrect at this stage);</li>
 <li>the git repository is either public or the factory has access to the private repository (in other words, you need to add the public SSH key generated by the factory to the list of SSH keys that can access your private repository for the import)</li>
</ul>

<p>Once imported, follow the steps below to generate a bootstrap script for your template:</p>
<ol>
  <li>Create an application that uses your template.</li>
  <li>Set datasources accordingly and fill out configuration settings for your template.</li>
  <li>Open the preview pane on the right.</li>
  <li>Select the device family you're interested in.</li>
  <li>Click on the arrow on the right, this should open the preview in a dedicated tab.</li>
  <li>Using "view source", extract the link to the bootstrap script. It should look like:
  <br/><code class="javascript">&lt;script data-joshfire-bootstraped src="/bootstrap/4f2958a5f83d5b3b52000087/4f2973fb89ec2f9d65000077/phone/"&gt;&lt;/script&gt;</code></li>
  <li>Prefix the address with <code>http://preview.joshfireapps.com</code> and add it to your template entry point</li>
</ol>

<p>That's it. Now open your template's entry point in a Web browser to test its functionality.</p>

<h3 id="update">How to test a template update</h3> 

<p>If the template you'd like to test is an update to an existing template, and provided the update does not change the manifest file, you do not need to go through the exercise explained above. Instead, you may use the factory to create an application that uses the original template and link to the generated bootstrap script to test the update on your local machine.</p>

<p>Replacing <code><em>[appid]</em></code> with the ID of your application (which appears in the link to the application in the applications list page), the bootstrap script for your template and application is available at:</p>
<pre><code class="uri">http://preview.joshfireapps.com/bootstrap/<em>[appid]</em>/auto/auto/</code></pre>

<p>You can then use the <code>src</code> attribute in the reference to the bootstrap script to test the template locally, for instance:</p>
<pre><code class="html">&lt;script data-joshfire-bootstrap
  src="http://preview.joshfireapps.com/bootstrap/4ea47636d58da375e7000080/auto/auto/"&gt;
&lt;/script&gt;</code></pre>

<p>The factory also allows users to configure templates parameters differently for different families of devices. For instance, factory users may want to bind one of the template's datasources inputs with an RSS feed that only contains smaller images and shorter abstracts on mobile phones, while they may prefer to see more content on desktops.</p>

<p>From a template perspective, the existence of different configuration settings is entirely transparent: the bootstrap script that gets loaded when the Web application starts already exposes the right information for the user's device. To test this possibility during template development, you may replace the last <code>auto</code> in the above mentioned bootstrap generator address with the family name of the device whose configuration settings you'd like to test, for instance:</p>
<pre><code class="uri">http://preview.joshfireapps.com/bootstrap/<em>[appid]</em>/auto/<strong>phone</strong>/
http://preview.joshfireapps.com/bootstrap/<em>[appid]</em>/auto/<strong>tv</strong>/
http://preview.joshfireapps.com/bootstrap/<em>[appid]</em>/auto/<strong>tablet</strong>/
http://preview.joshfireapps.com/bootstrap/<em>[appid]</em>/auto/<strong>desktop</strong>/
http://preview.joshfireapps.com/bootstrap/<em>[appid]</em>/auto/<strong>object</strong>/</code></pre>

